import java.util.List;
import java.util.Map;

import dto.League.League;
import dto.Stats.*;
import constant.Region;
import dto.Summoner.Summoner;
import main.java.riotapi.RiotApi;
import main.java.riotapi.RiotApiException;

import com.google.gson.Gson;

import java.util.Scanner;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.net.MalformedURLException;
import java.net.URL;

public class RiotApitierGet extends TS3_Bot{
	public static String GetTier(String sumName) throws RiotApiException, UnsupportedEncodingException, IOException{
		RiotApi api = new RiotApi("a1084308-ba7f-4f46-8d63-4ec487b01fb1", Region.NA);
		long sumId = 5;
		String tier = null;
		String apiKey = "a1084308-ba7f-4f46-8d63-4ec487b01fb1";
		String region = "na";
		URL url;
		String line = "";
		String urlIns;
		
		sumName = sumName.replaceAll("\\s", "");
		sumId = api.getSummonerByName(sumName).get(sumName).getId();
		urlIns = "https://na.api.pvp.net/api/lol/" + region + "/v2.2/matchhistory/" + sumId + "?api_key=" + apiKey;
		url = new URL(urlIns);
		
		try (BufferedReader reader = new BufferedReader(new InputStreamReader(url.openStream(), "UTF-8"))) {
				line = reader.readLine();
		}
		
		if (line.contains("CHALLENGER")){
			tier = "Challenger";
		}else if (line.contains("MASTER")){
			tier = "Master";
		}else if (line.contains("DIAMOND")){
			tier = "Diamond";
		}else if (line.contains("PLATINUM")){
			tier = "Platinum";
		}else if (line.contains("GOLD")){
			tier = "Gold";
		}else if (line.contains("SILVER")){
			tier = "Silver";
		}else if (line.contains("BRONZE")){
			tier = "Bronze";
		}
		
		return tier;
	}
}
